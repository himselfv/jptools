
В базе яркси нас интересуют две таблицы:
	kanji	=== содержит кандзи
	tango	=== содержит слова

Слово имеет:
	Четыре слота для номеров кандзи
	Слот для каны
	Чтение (текстом)
	Перевод (кодом)

Соответственно, по слову можно получить две вещи:
	Чтение (уже дано)
	Запись (нужно восстановить)
	
Восстановление записи:
	Если не указано иначе, слово составляется как:
		K1 K2 K3 K4 Kana (Ki идут до первого нуля)
	Кандзи или каны может вообще не быть.
	Кана может идти в промежутках, это пишется так:
		2no4kara ==> 1 2 NO 3 4 KARA
	
Поиск осуществляется так:
	- разбираем фразу на компоненты (кандзи, кана, кандзи, кана)
	- превращаем хирагану и катакану в ромадзи
	1. По записи:
		- ищем все записи по набору кандзи
		- для каждой сравниваем указанную кану, и оцениваем, она ли это
			(в словаре различается катакана-хирагана, так что нужно сравнивать с умом)
	2. По чтению:
		- находим каждый кандзи из фразу
		- находим все его чтения
		- составляем все варианты фразы
		- ищем по чтениям
Второй вариант более простой и перспективный (поскольку некоторые записанные каной
	куски могут в словаре быть записаны кандзи), однако медленнее.


=========================================================
Кодировка русского -- полностью разобрана, см. YarxiFmt.pas.


=========================================================
Кодировка каны:
  aikotoba
  aka

Длинные гласные показаны двоеточием:
  a:mi == aami


=========================================================
Ссылки на слова.
Встречаются и в Kanji.Russian, и в Tango.Russian. Цифра всегда - слово.

^[номер] === "см. [номер]"
^^[номер] === "сокр. от [номер]"
^[цифра][номер] === альтернативные формы
Цифра:
  3 = "реже [номер]"
  4 = "иначе [номер]"
^[цифра]-[номер] === альтернативная форма в виде кандзи
^^[те же варианты] == "то же, что"
Если после цифры идёт ^, то далее продолжение:
  ^3-590^690 === "реже [590][690]"



=========================================================
Kanji
  Nomer		Номер. В точности соответствует номеру записи, так что при импорте по порядку можно игнорировать.
  RusNick	Имя кандзи на русском. Может содержать альтернативные записи "вариант1*#*вариант2*". См. YarxiFmt.pas.
  OnYomi	Оны, см. ниже. Если пустое или "-", кокудзи.
  KunYomi	Куны, см. ниже.
  Russian	Значение, см. ниже.
  Compounds
  Str
  Utility
  Uncd		Код символа в UCS2/UTF16 (число).
  Bushu
  Dicts
  Layout
  Concise
  Yo

=== OnYomi
Формат: *kana*;*kana**;*kana*
Если в конце две звёздочки, чтение малоупотребляемое.
Строка пустая или стоит тире - кокудзи.
Могут использоваться ";" и ",".

=== KunYomi
Формат:
  3*tsugu*^01129*|A
  0*oshi*
  ||$ $
  !5?5*omoneru*|A/O-||$a$||$o-$
  33334*aware*awareppoi*awaremu*^42909*awaremi*kanashii*^52321
  0322* AI *itoshii**mederu** AIRASHII *

Первым идёт набор цифр, каждая определяет, сколько букв "покрывает" кандзи в соотв. чтении:
  334*aware*awareppoi*kanashii
0 означает "покрывает всё слово"

Дальше, разделённые *, идут чтения.
После каждого чтения через * может стоять ссылка в форме:
  ^01129	см. также
  ^42909	иначе
  ^52321	чаще
После неё тоже ставится *. Последняя * не ставится.

=== Russian
~ в начале строчки === "черновой список значений"


=========================================================
Tango
  Nomer		Номер. В точности соответствует номеру записи, можно игнорировать.
  K1		Ссылки на кандзи, см. Введение.
  K2
  K3
  K4
  Kana		Кана, см. ниже.
  Reading	Чтение, см. ниже.
  Russian	Перевод, см. ниже.
  Hyphens	Список позиций, где следует вставить тире или пробел, напр.: "-7 9" + "aiduchiwoutsu" = "aiduchi-wo utsu".
  Yo


=== K*, Kana -- более-менее разобрано
Если не указано иначе, слово составляется как:
	K1 K2 K3 K4 Kana (Ki идут до первого нуля)
Кандзи или каны может вообще не быть.
Кана может идти в промежутках, это пишется так:
	2no4kara ==> 1 2 NO 3 4 KARA
Скобки трактуются вполне буквально:
	2(4) ==> 1 2 (3 4)
	2[4] ==> 1 2 (3 4)
Все неиспользованные кандзи добавляются в конец, то есть, можно сделать так:
	0a:kanso: ==> A:KANSO: 1 2
По умолчанию кана - хирагана; катакана включается так:
	^a:kanso: ==> A:KANSO: (катаканой)

Непонятно:
  0akarasama	akarasama	*2\прямой\,\ясный\,\открытый\;\честный\,\откровенный
	все кандзи 0, последнее -1 -- втф?
	похоже, по такой схеме пишутся все слова, которые не используют кандзи и НЕ катакана (пишутся хираганой, нативные)
  1^ei	akaei	#\ихт.#\красный хвостокол\(\скат\),=\Dasyatis akajei
	зачем такая схема? кандзи всего один, можно было не ставить 1
	видимо, ^ по умолчанию предполагает цифру перед ним (обычно это ноль), а т.к. здесь не ноль - её указали явно. Не знаю, что будет если сделать просто "^ei", и встречается ли такое.


=== Reading
Дополнительные чтения звёздочкой (ставится после каждого):
  akira*terasu*teru*

Если дополнительное чтение редкое, ставится двойная звёздочка:
  akuseku*akusaku**

Непонятно:
  aitaibaibai*(*aitai*baibai*

0^a:kanso:	a:kanso:shu:*(*a:kanso:*shu:*	>>\\[\штат\]\ Арканзас	アーカンソー州
2wo3tsu	aiduchiwoutsu*(*aiduchi*wo*utsu*	поддакивать
	то есть, *(* задаёт разбивку выражения на логические части? с помощью *
2(4)	aizenmyo:o:*(*myo:o:*aizen*	#\будд.#\Рагараджа\,\божество любви\(\один из богов-охранителей\;\санскр.#\Ragaraja\#)



=== Russian
! в начале строчки === "не проверено"
!\ === возможно, надо так
\! === !

@ === специальные фразы:
  3 = "и т.п."




=========================================================






'' === хирагана:
''no'' === (хираганой) no

# === переключение италика
#text# === text италиком

() === скобки
По умолчанию текст в скобках - италик.

>[цифры] === специальный тип слова
  1 = мужское имя
  2 = женское имя
  3 = фамилия
  4 = псевдоним
  5 = топоним
Цифры могут объединяться: >35 === "фамилия и топоним"
Повторяться: >11 == "мужские имена"

& === начало следующего варианта
Например: &строение из камня&запор на двери
  1. строение из камня
  2. запор на двери

Звёздочки:
*0 === "~shita", и т.п., 0..9:
  shita, suru, na, no, ni, de, to, taru, shite, shite iru
**0 === "~o suru", и т.п., 0..9:
  o suru, ga aru, no aru, no nai, de aru, des, da, ni suru, ni naru, to shite
***0 === "~naru", и т.п., 0..9:
  naru, kara, made, mo, wa, to suru, yori, ga shite iru, to shita, to shite iru
****0 === таких нет.
*=00 === двойной номер (их дофига, надо таблицу выдрать).
Минус перед номером значит, что весь блок в скобках:
*-4 === "(~ni)"
Закрывающая квадраная скобка после номера значит, что номер в квадратных скобках:
*4] === "~[4]"

Загадки:
\_

Примеры:
&#\муз.#\интерлюдия\(\особ.\на сямисэне между двумя песнями\)
&\оживляющий возглас\(\в песне\)
&\вставная\(#\непрошенная\#)\реплика
<i>: муз.
<i>: особ. на сямисэне между двумя песнями
<i>: в песне

Мб:
#\ === переключает италик
\(, \) === италик-скобки
\(#, \#) === не-италик скобки

1: *=00 *=01 *=02 *=03 *=04 *=05 *=06 *=07 *=08 *=09
2: *=10 *=11 *=12 *=13 *=14 *=15 *=16 *=17 *=18 *=19
3: *=20 *=21 *=22 *=23 *=24 *=25 *=26 *=27 *=28 *=29
4: *=30 *=31 *=32 *=33 *=34 *=35 *=36 *=37 *=38 *=39
